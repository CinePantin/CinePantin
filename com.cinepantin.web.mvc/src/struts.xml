<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>

	<constant name="struts.enable.SlashesInActionNames" value="true"/>
	<constant name="struts.mapper.alwaysSelectFullNamespace" value="false"/>
	<!--  constant name="struts.patternMatcher" value="regex" / -->
	
	
	
	<!--+
		!
		!	Define some Struts properties
		!
		!	Alternatively, these could have been defined in (yet) another file, /WEB-INF/classes/struts.properties
		!	@see https://cwiki.apache.org/confluence/display/WW/struts.properties
		!			for properties definitions and default values
		!
		+-->
	<!-- Nos classes Struts sont gérées par Spring -->
	<constant name="struts.objectFactory" value="spring" />
	
	<!-- On veut avoir de jolies URL -->
	<constant name="struts.action.extension" value=",action" />
	
	<!-- Et aussi pouvoir utiliser des slashes et des wildcards -->
	<constant name="struts.enable.SlashesInActionNames" value="false" />
	<!-- Example : <action name="*/*" method="{2}" class="actions.{1}"> will match "/foo/edit" or "/foo/save" -->
	
	<!-- Et enfin on veut bien un peu d'aide pendant le développement... (FIXME: à supprimer en production) -->
	<constant name="struts.devMode" value="true" />
	<constant name="struts.configuration.xml.reload" value="true" />
	<constant name="struts.el.throwExceptionOnFailure" value="false" />
	<constant name="struts.ognl.logMissingProperties" value="false" /><!-- (very verbose)  -->
	
	
	
	
	<!--+
		!
		!	Main package definition
		!
		+-->
	<package name="articles" namespace="/catalogue"
		extends="struts-default"><!-- indiquer "tiles-default" pour se passer de la déclaration de result-type -->
		
		<result-types>
  			<result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult"/>
		</result-types>
		
		<action name="list/" method="list2" 
				class="SpringStrutsArticleAction">
			<result>/ArticlesList.jsp</result>
			<result name="success">/ArticlesList.jsp</result>
  			<result name="success-tiles" type="tiles">articles/index</result><!-- Apache Tiles definition -->
		</action>
		
		
	</package>

	<!--
	<package name="User"  extends="struts-default" namespace="/user">
	
		<default-action-ref name="index"></default-action-ref>
		
		<action name="index">
			<result>/user/saisieUser.jsp</result>
		</action>
		
		<action name="ajouter" method="ajout"
								class="fr.aframp.web.controllers.UserAction" >
       	    <result name="input">/user/saisieUser.jsp</result>
       	    <result name="success">/user/viewUser.jsp</result>
       	    <result name="success2" type="redirectAction">voir/${next}</result>
       	    <!- -  result name="success" type="redirectAction">view/${name}</result - ->
       	    <result name="error">/user/error.jsp</result>
		</action>
		
		
		<action name="voir/{next}" method="browse"
								class="fr.aframp.web.controllers.UserAction">
			<result name="success">/user/viewUser.jsp</result>
		</action>
		
		
	</package>
	
	
	
	<package name="UserView"  extends="struts-default" namespace="/user/view">
		<action name="*" method="voir"
								class="fr.aframp.web.controllers.UserAction">
			<result name="input">/user/viewUser.jsp?user.name=${1}</result>
		</action>
	</package>
	-->
	
</struts>